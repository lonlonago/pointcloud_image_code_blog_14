In PCL's point cloud library, a large number of dynamic memory programming methods are used, such as: 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309573735826
  ```  
 The first line is to declare a dynamic memory for storing point cloud data, so here I make a note about the dynamic memory problem in C++. In addition to static memory and stack memory, each program also has a memory pool. This part of the memory is called free space or stack. The program uses the heap to store dynamically allocated objects. The lifetime of these dynamic objects is controlled by the program. It can be understood that when dynamic memory is no longer used, the code must explicitly destroy them. The management of dynamic memory in C++ is done by a pair of operators: new allocates space for the object in dynamic memory and returns a pointer to the object, which can be selected to initialize the object; delete destroys the dynamic object pointer and frees the associated memory, so the management of dynamic memory is prone to problems, because it is very difficult to ensure that the memory is freed at the correct time. If we forget to free the memory, in this case it will lead to memory leakage. If the pointer references the memory, it is easy to refer to the illegal memory pointer. So in short, the operator New allocates memory, delete frees New's allocated memory, and uses New's method of dynamically allocating and initializing objects. Int * pi = new int means that pi points to a dynamically allocated uninitialized unnamed object. The expression indicates that an int-type object is constructed in free space and returns a pointer to the object. Of course, you can also use a list to initialize int * pi = new int (1024); the value of the object pointed to by pi is 1024, such as vector * ps = new string (10, '9'); it means that * ps is 999999999, which can also be used to initialize dynamically allocated objects. Just follow the type name with a pair of empty parentheses. * ps1 = new string (); value initialized to empty string  

 C++ new standard, two types of smart pointers are provided to manage dynamic objects. Smart pointers behave like regular pointers. The important difference is that they can automatically release the pointed object, shared_ptr allow multiple pointers to point to the same object, and unique_ptr to monopolize the pointed object. The difference between the two methods is that the underlying pointers are managed differently. Similar to vector smart pointers, there are templates, which give the data type in angle brackets, followed by the name of the defined smart pointer: 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309573735826
  ```  
 When dereferencing a smart pointer, returning the object it points to, one of the safest ways to allocate and use memory is to call a standard library function called make_shared, which allocates an object in dynamic memory and initializes it, returning the shared_Ptr to this object Like the smart pointer, make_shared is also defined in the memory of the C++ library. When using make_shared, you must specify the type of object you want to create, giving a simple instance: 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309573735826
  ```  
 When the copy and assignment operation, each shared_ptr will record how many other shared_ptr point to the same object, so you can think of each shared_ptr has an associated counter, called reference count, so whenever you copy a shared_ptr counter will be incremented, and when we give shared_ptr a new value or shared_ptr destroyed, the counter will be decremented, once a shared_ptr counter becomes 0, it will automatically release the object it manages, so when the last shared_ptr pointed to the object is destroyed, shared_Ptr class will automatically destroy the object, through another special member function called destructor (destructor) to complete the destruction work, so the destructor is used to release the resources allocated by the object, shared_ptr destructor Decreases the reference count of the object it points to. If the reference becomes 0, shared_pre destructor Hasselblad destroys the object and frees the memory it occupies. Here is an example of the definition in PCL 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309573735826
  ```  
 This example is the content of implementing plane extraction, which involves the data definition of point cloud data transposition PCL in ROS, which involves the use of cloud.makeShared (), so we can compare it to the definition: 

  ```python  
After clicking on the GitHub Sponsor button above, you will obtain access permissions to my private code repository ( https://github.com/slowlon/my_code_bar ) to view this blog code. By searching the code number of this blog, you can find the code you need, code number is: 2024020309573735826
  ```  
 ![avatar]( 201805092111147) 

 Here read and compare seems to be able to understand what, this is also a lot of people confused, next I will try to make more time to write blog debugging code, may write some about the conversion between various formats of 3D data, as well as the method of CAD model sampling check point cloud, so please pay more attention to Weixin official account, share with us, if you have any questions, please point out that the record of taking notes in this way, let me understand the article more deeply, and welcome everyone to pay attention to WeChat official account or join the 3D visual WeChat group to communicate and share the submission email dianyunpcl@163.com 

